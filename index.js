(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();function g(r,e){const s=[];let c,t;try{r<=5?(c=0,t=r-1):e<=2?(c=0,t=4):e>=r-3?(c=r-5,t=r-1):(c=e-2,t=e+2);for(let n=c;n<=t;n++)s.push(n);return e>=4&&!s.includes(0)&&s.unshift(0),t<=r-2?(s.push("..."),s.push(r-1)):t===r-2&&s.push(r-1),s}catch(n){console.log(`Ошибка в параметрах пагинации: ${n}`)}}function L(r,e,s){const c=document.querySelector(".pagination");c.innerHTML="";const t=g(r,e);try{t.forEach(n=>{if(n==="..."){const o=document.createElement("span");o.textContent="...",o.classList.add("pagination__dots"),c.appendChild(o)}else{const o=document.createElement("button");o.textContent=n+1,o.classList.add("pagination__btn"),n===e&&o.classList.add("active"),o.addEventListener("click",()=>{s(n)}),c.appendChild(o)}})}catch(n){console.log(`Ошибка в рендере пагинации: ${n}`)}}const u=document.querySelector(".cards"),v=document.querySelector(".header-form"),_=document.getElementById("search");let p="";async function m(r=0,e=""){var t,n;p=e;const s=new URLSearchParams({apikey:"L1jPPLF7E3w1Bs5yPVnSQz5OqfouKgX8",page:r,size:20});e&&s.append("keyword",e);const c=`https://app.ticketmaster.com/discovery/v2/events.json?${s.toString()}`;try{const a=await(await fetch(c)).json(),f=(((t=a._embedded)==null?void 0:t.events)||[]).filter(i=>i.images.length&&i.name&&i.dates.start.localDate&&i._embedded.venues.length);if(f.length===0){u.innerHTML='<p class="no-results">Ничего не найдено</p>';return}let l;e?l=Math.min(a.page.totalPages,5):l=Math.min(a.page.totalPages,50);let d;typeof((n=a.page)==null?void 0:n.number)=="number"?d=a.page.number:d=0,L(l,d,i=>m(i,p)),b(f)}catch(o){console.log(`Ошибка с базой данных: ${o}`)}}const h=new IntersectionObserver(r=>{r.forEach(e=>{e.isIntersecting?(e.target.classList.add("animate__animated","animate__bounceIn"),h.unobserve(e.target)):e.target.classList.remove("animate__bounceIn")})},{threshold:.1});function b(r){try{u.innerHTML="",r.forEach(e=>{const s=document.createElement("a");s.href=e.url,s.setAttribute("target","_blank"),s.classList.add("card");const c=document.createElement("img");c.src=e.images[0].url,c.alt=e.name,c.classList.add("card__img");const t=document.createElement("h2");t.textContent=e.name,t.classList.add("card__title");const n=document.createElement("h5");n.textContent=e.dates.start.localDate,n.classList.add("card__time");const o=document.createElement("p");o.textContent=e._embedded.venues[0].name,o.classList.add("card__place");const a=document.createElement("div");a.classList.add("rectangle"),s.append(c,t,n,o,a),u.append(s),h.observe(s)})}catch(e){console.log(`Ошибка в генерации карточек: ${e}`)}}v.addEventListener("submit",r=>{r.preventDefault();const e=_.value.trim();m(0,e)});m();
//# sourceMappingURL=index.js.map
